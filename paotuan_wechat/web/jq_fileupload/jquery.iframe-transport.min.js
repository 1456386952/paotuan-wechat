(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(window.jQuery)}}(function(a){var b=0;a.ajaxTransport("iframe",function(g){if(g.async){var f=g.initialIframeSrc||"javascript:false;",d,e,c;return{send:function(h,i){d=a('<form style="display:none;"></form>');d.attr("accept-charset",g.formAcceptCharset);c=/\?/.test(g.url)?"&":"?";if(g.type==="DELETE"){g.url=g.url+c+"_method=DELETE";g.type="POST"}else{if(g.type==="PUT"){g.url=g.url+c+"_method=PUT";g.type="POST"}else{if(g.type==="PATCH"){g.url=g.url+c+"_method=PATCH";g.type="POST"}}}b+=1;e=a('<iframe src="'+f+'" name="iframe-transport-'+b+'"></iframe>').bind("load",function(){var j,k=a.isArray(g.paramName)?g.paramName:[g.paramName];e.unbind("load").bind("load",function(){var m;try{m=e.contents();if(!m.length||!m[0].firstChild){throw new Error()}}catch(l){m=undefined}i(200,"success",{iframe:m});a('<iframe src="'+f+'"></iframe>').appendTo(d);window.setTimeout(function(){d.remove()},0)});d.prop("target",e.prop("name")).prop("action",g.url).prop("method",g.type);if(g.formData){a.each(g.formData,function(m,l){a('<input type="hidden"/>').prop("name",l.name).val(l.value).appendTo(d)})}if(g.fileInput&&g.fileInput.length&&g.type==="POST"){j=g.fileInput.clone();g.fileInput.after(function(l){return j[l]});if(g.paramName){g.fileInput.each(function(l){a(this).prop("name",k[l]||g.paramName)})}d.append(g.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data");g.fileInput.removeAttr("form")}d.submit();if(j&&j.length){g.fileInput.each(function(m,n){var l=a(j[m]);a(n).prop("name",l.prop("name")).attr("form",l.attr("form"));l.replaceWith(n)})}});d.append(e).appendTo(document.body)},abort:function(){if(e){e.unbind("load").prop("src",f)}if(d){d.remove()}}}}});a.ajaxSetup({converters:{"iframe text":function(c){return c&&a(c[0].body).text()},"iframe json":function(c){return c&&a.parseJSON(a(c[0].body).text())},"iframe html":function(c){return c&&a(c[0].body).html()},"iframe xml":function(c){var d=c&&c[0];return d&&a.isXMLDoc(d)?d:a.parseXML((d.XMLDocument&&d.XMLDocument.xml)||a(d.body).html())},"iframe script":function(c){return c&&a.globalEval(a(c[0].body).text())}}})}));