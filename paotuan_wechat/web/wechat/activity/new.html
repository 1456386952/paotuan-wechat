             <link href="/datetime/datetime.min.css" rel="stylesheet" type="text/css">
              <script src="/datetime/datetime.js" type="text/javascript"></script>
			<script src="/js/vbt.min.js" type="text/javascript"></script>
			<script id="image-carousel-template" type="text/x-handlebars-template"> 
                 <ol class="carousel-indicators">
                     {{#each this}} 
								<li data-target="#carousel-act"
									data-slide-to="{{@index}}" class="{{#if @index}}{{else}}active{{/if}}"></li>
                      {{/each}}
							</ol>
							<div class="carousel-inner" role="listbox" >
                               {{#each this}} 
								<div 
									class="{{#if @index}}item{{else}}item active{{/if}}">
									<img src="http://xiaoi.b0.upaiyun.com/{{this}}"
										style="width: 100%;max-height: 200px">
								</div>
                      {{/each}}
			   </div>
		</script>
			
			 <div id="carousel-act" class="carousel carousel-images slide text-center" data-ride="carousel" style="height:200px">
                      <div class="carousel-inner" role="listbox">
								<div 
									class="item active">
									<img src="/image/paotuanzhuce/new_act_bg.png"
										style="width: 100%;height: 200px">
								</div>
					</div>
                      <a  class="left carousel-control" data-slide="prev" style="display: none"> <span
								class="fa fa-chevron-left"></span>
							</a> 
					  <a  class="right carousel-control" data-slide="next" style="display: none"> <span
								class="fa fa-chevron-right"></span>
							</a>
				
				<div class=" am-form-file text-center" style="color:white;position: absolute;top:50px;line-height:14px;width:60%;margin-left: 19%;">
				<button class="btn  home-function-btn  no-border" style="background-image:url('/image/paotuanzhuce/camera.png');height:80px;width:110px;background-color: rgba(0,0,0,0);background-size:100%">
				</button>
				 <h5 class="" style="color:#fff">点击上传活动背景图片</h5>
				<input type="file"  id="act_image" name="file[]" multiple="multiple" style="height:90px;width:100%;z-index: 11;" accept="image/gif,image/png,image/jpg,image/jpeg,image/bmp"> 
				</div>
             </div>
                    
<div class="panel-body">
	<form role="form" method="post"  name="actForm" id="actForm" novalidate >
		<input type="hidden" value="{{club.clubid}}" name="club_id">
		<fieldset>
			<legend>发布约跑活动</legend>
			<input type="hidden" name="Activity[act_image]" id="act_image_value">
			<div class="form-group">
				<input required class="form-control" id="act_title" name="Activity[act_title]" 
					value="" placeholder="约跑名称" type="text" maxlength="30" check-type="required">
			</div>

	      <div class="form-group" no-error-text="1">
				<input required="required"  check-type="required" class="form-control" 
							id="act_date" value="" type="text"
							readonly="readonly" placeholder="请选择约跑日期" onchange="dateChange(this.value);">
					
			</div>

		
				<table style="width: 100%;margin-bottom: 15px">
					<tr>
						<td>
							<div class="form-group no-margin" no-error-text="1">
						<input required="required" check-type="required"  class="form-control" 
							id="start_time"  value="" type="text"
							readonly="readonly" placeholder="开始时间">
							</div>
							</td>
						<td align="center">-</td>
						<td>
						<div class="form-group no-margin" no-error-text="1">
						<input required="required" check-type="required"  class="form-control"
							id="end_time"  value="" type="text"
							readonly="readonly" placeholder="结束时间">
							</div>
							</td>
					</tr>
				</table>
			
			
			<input type="hidden" id="act_start_time" name="Activity[act_start_time]">
				<input type="hidden" id="act_end_time" name="Activity[act_end_time]">
	<!-- 			
	<div class="form-group" no-error-text="1">
				<label><span class="i-red-12">*</span>约跑地点</label>
				<select  name="Activity[act_location]" id="act_location" check-type="required"  style="max-width:150px">
				  <option on-repeat-finish-render-filters ng-repeat="location in data.data" value="{{location.id}}" {{$index==2?selected}}>{{location.name}}</option>
				</select>&nbsp;&nbsp;<a ng-if="location_length>0" class="btn btn-default border-circle btn-info" ng-click="locationInfo()"><i class="fa fa-map-marker"></i></a>&nbsp;&nbsp;<a class="btn btn-default border-circle btn-info" ng-click="showMap();" style="padding-left:10px;padding-right:10px"><i class="fa fa-plus"></i></a>
			</div>
			 -->
			
	<div class="form-group" no-error-text="1">
	<label><span class="i-red-12">*</span>约跑地点</label>&nbsp;&nbsp;<a class="btn border-circle btn-primary" ng-click="showMap();" style="border-color:#009ada;background-color: transparent;border:thin #009ada solid;padding:2px 4px 0px 4px"><i class="fa fa-plus main-color"></i></a>
<input type="text" readonly="readonly" class="form-control" value="{{locations[0].name}}"  id="act_location_btn" check-type="required" data-toggle="collapse" data-target="#location_collapse">
<input type="hidden"  value="{{locations[0].id}}" name="Activity[act_location]" id="act_location" check-type="required">
<div ng-if="location_length>0" class="collapse" id="location_collapse">
<div class="list-group">
  <a div-select="selectClick({parent:'act_location_btn',value:{{location.id}},text:'{{location.name}}',collapse:'location_collapse',valueField:'act_location'})" class="list-group-item container-fluid no-padding-top no-padding-bottom" ng-repeat="location in locations">
    <div class="col-xs-9 no-padding text-truncate" style="line-height:32px;height:32px">
    {{location.name}}
    </div> 
    <div class="col-xs-3 no-padding">
    <button ng-if="location.can_delete" ng-click="deleteLocation(location.id)" class="btn no-border pull-right" style="background-color: transparent;"><i class="fa fa-times text-muted" style="font-size:18px"></i></button>
  </div>
  </a>
</div>
</div>
	</div>
			
           <div class="form-group" style="display: none;">
			 <div class="switch" tabindex="0" >
                <input id="need_register" name="Activity[need_register]" type="checkbox" data-label-width="80" data-on-color="success"  checked="checked" value="1" data-label-text="需要报名"/>
            </div>
            
			</div>
			<div class="form-group">
				<label for="act_desc"><span class="i-red-12">*</span>活动简述</label>
				<textarea required="required" check-type="required" id="act_desc" name="Activity[act_desc]" rows="4" cols="" class="form-control" 
					placeholder="填写活动说明，让大家更清楚您的活动"></textarea>
			</div>
			
		</fieldset>
		<input type="button" class="btn btn-ar btn-block btn-primary"  value="发布" ng-click="submitForm();" id="subBtn">
	</form>
</div>

<div class="modal fade" id="mapModal" role="dialog"  role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
                          <div class="modal-dialog">
                            <div class="modal-content">
                              <div class="modal-header" style="padding:8px">
                                <button type="button" class="close" data-dismiss="modal">×</button>
                                <h4 class="modal-title" id="myModalLabel">创建约跑地点</h4>
                              </div>
                              <div class="modal-body" style="padding:8px">
                               <form id="locationForm" class="form-inline" role="form">
        <div class="alert alert-danger" style="display: none" id="alert"></div>
          <div class="form-group no-margin">
            <label for="recipient-name" class="control-label">名称:</label>
            <input type="text" class="form-control" id="location_name" name="ActivityLocation[name]" placeholder="起个自己的名字吧">
          </div>
          <div class="form-group no-margin">
            <label for="message-text" class="control-label" id="locationLabel"></label>
          </div>
             <input type="hidden" value="" id="location" name="ActivityLocation[location]">
             <input type="hidden" value="{{club.clubid}}" id="club_id" name="ActivityLocation[club_id]">
             <input type="hidden" value="" id="lat" name="ActivityLocation[lat]">
              <input type="hidden" value="" id="lng" name="ActivityLocation[lng]">
              <button value="保存" data-loading-text="保存中..." class="btn btn-primary" id="subMapBtn" ng-click="saveLocation();">保存</button>
        </form>
                                <div  id="mapContainer" style="width:100%; height:400px;display:none;margin-top: 14px"></div>
                              </div>
                            </div>
                            </div>
                 </div>
<script>
//fileuploadMultiNg("act_image");
$("#act_date").attr("min",new Date());
$("#start_time").attr("min",new Date());
$("#end_time").attr("min",new Date());
initDateTimePicker(null,"#act_date","date");
initDateTimePicker(null,"#start_time","time");
initDateTimePicker(null,"#end_time","time");
//$("input[type='checkbox']").bootstrapSwitch();
	
function dateChange(value){
	var now = new Date();
	var year = now.getFullYear();
	var month = now.getMonth()+1<10?"0"+(now.getMonth()+1):now.getMonth();
	var date = now.getDate()<10?"0"+now.getDate():now.getDate();
	var tmp = year+"-"+month+"-"+date;
	$("#start_time").unbind("click");
	$("#end_time").unbind("click");
	if(value!=tmp){
		$("#start_time").removeAttr("min");
		$("#end_time").removeAttr("min");
	}else{
		$("#start_time").attr("min",new Date());
		$("#end_time").attr("min",new Date());
	}
	initDateTimePicker(null,"#start_time","time");
	initDateTimePicker(null,"#end_time","time");
}
</script>
